{"name":"Ensure server parameter 'log_retention_days' is greater than 3 days for PostgreSQL Database Server","slug":"azure-1-3-0-database-3-7","body":"Enable `log_retention_days` on `PostgreSQL Servers`.\n\n**Rationale**\n\nEnabling `log_retention_days` helps PostgreSQL Database to `Sets number of days a log file is retained` which in turn generates query and error logs. Query and error logs can be used to identify, troubleshoot, and repair configuration errors and sub-optimal performance.","description":"","severity":2,"remediationDescription":"**From Azure Console**\n\n1. Login to Azure Portal using https://portal.azure.com\n2. Go to `Azure Database` for `PostgreSQL server`\n3. For each database, click on `Server parameters`\n4. Search for `log_retention_days`.\n5. Enter value in range 4-7 (inclusive) and save.\n\n**Using Azure Command Line Interface 2.0**\n\nUse the below command to update log_retention_days configuration.\n\n```bash\naz postgres server configuration set --resource-group \u003cresourceGroupName\u003e --server-name \u003cserverName\u003e --name log_retention_days --value \u003c4-7\u003e```\n\n**References**\n\n1. [https://docs.microsoft.com/en-us/azure/postgresql/howto-configure-server-parameters-using-portal](https://docs.microsoft.com/en-us/azure/postgresql/howto-configure-server-parameters-using-portal)\n2. [https://docs.microsoft.com/en-us/rest/api/postgresql/configurations/listbyserver](https://docs.microsoft.com/en-us/rest/api/postgresql/configurations/listbyserver)\n3. [https://docs.microsoft.com/en-us/azure/security/benchmarks/security-controls-v2-logging-threat-detection#lt-6-configure-log-storage-retention](https://docs.microsoft.com/en-us/azure/security/benchmarks/security-controls-v2-logging-threat-detection#lt-6-configure-log-storage-retention)","rules":[{"cloudProviders":["azure"],"comparator":"eq","expectedResult":"[]","subjects":["PostgreSQLServer"],"query":"azure-1-3-0-database-3-7-server-parameter-log-retention-days-is-greater-than-3-days-for-postgresql-database-server","returnPath":""}]}